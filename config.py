"""
配置文件模块
存放所有配置常量和系统提示词
"""

import os
from dotenv import load_dotenv

# 加载环境变量
load_dotenv()

# ==============================================================================
# API 配置
# ==============================================================================
OPENROUTER_API_KEY = os.environ.get("OPENROUTER_API_KEY")

# 模型配置
# MODEL_NAME = "openai/gpt-5" 
MODEL_NAME = "minimax/minimax-m2:free"
# MODEL_NAME = "mistralai/mistral-7b-instruct" # 替代选择：轻量级/低费用

OPENROUTER_BASE_URL = "https://openrouter.ai/api/v1"
LLM_TEMPERATURE = 0  # 设置为0以获得更稳定的诊断结果

# ==============================================================================
# 文件路径配置
# ==============================================================================
LOG_FILE_PATH = "sample.log"

# 输出目录配置
OUTPUT_DIR = "output"  # 输出文件保存目录

# 输出文件名配置（实际路径会在运行时拼接目录路径）
OUTPUT_DIAGNOSIS_RESULTS = "diagnosis_results.json"
OUTPUT_STATISTICS_REPORT = "statistics_report.json"
OUTPUT_STRUCTURED_RESULTS = "structured_results.json"

# ==============================================================================
# 系统提示词
# ==============================================================================
SYSTEM_PROMPT = """你是一位专业的系统日志分析师。你的任务是根据提供的日志列表，判断每条日志是否包含严重错误或异常。
请严格按照 JSON 数组格式输出结果，不要输出任何其他内容。
JSON 格式要求：
[
    {
        "index": <日志行号>, 
        "log": <原始日志内容>,
        "severity": <判断等级：如 '正常', '警告', '错误', '严重'>,
        "diagnosis": <简短的诊断结论和潜在原因>
    },
    ...
]
"""

# ==============================================================================
# 严重程度配置
# ==============================================================================
SEVERITY_ORDER = ["严重", "错误", "警告", "正常", "未知"]

# 严重程度对应的视觉标记
SEVERITY_MARKERS = {
    "严重": "🔴",
    "错误": "🟠",
    "警告": "🟡",
    "正常": "🟢",
    "未知": "⚪"
}

